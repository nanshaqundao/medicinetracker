# 家庭药品管理系统
Medicine Inventory Management System

一个支持语音输入的两阶段药品管理系统，帮助您轻松整理和追踪家中药品。

## 概述

本项目包含两个 HTML 应用程序，旨在帮助您组织和追踪家庭药品：

1. **语音收集器** - 快速语音数据采集
2. **药品管理系统** - 结构化库存管理与有效期追踪

## 阶段一：语音收集器 (`voice-collector.html`)

### 用途
通过语音快速收集药品信息，无需担心数据结构的完整性。

### 功能特点
- **两种录音模式：**
  - **单次模式**：点击一次，说一句，自动停止并添加
  - **连续模式**：点击一次，连续说多句，每句自动添加为新条目
- 实时显示条目并支持编辑
- 导出为纯文本文件（每行一条）
- 自动保存到浏览器本地存储
- 中英文双语界面

### 使用方法
1. 用 Edge 或 Chrome 浏览器打开 HTML 文件
2. 选择录音模式（推荐使用连续模式，速度更快）
3. 首次使用时允许麦克风权限
4. 自然地说出药品信息（例如："红霉素眼膏有效期2027年6月"）
5. 完成后导出为文本文件

### 输出示例
```
红霉素眼膏有效期2027年6月
布洛芬30片2026年3月
维生素C
阿莫西林胶囊
```

## 阶段二：药品管理系统 (`medicine-tracker.html`)

### 用途
结构化管理系统，支持完整的增删改查操作和有效期追踪。

### 功能特点
- **语音输入**：语音转表单，智能解析信息
- **数据字段：**
  - 药品名称 / Medicine Name
  - 通用名 / Generic Name
  - 数量与单位 / Quantity & Unit
  - 有效期 / Expiry Date
  - 类别 / Category
- **智能功能：**
  - 颜色编码的有效期警告（红色：已过期，橙色：<30天，黄色：<90天）
  - 按类别搜索和筛选
  - 统计仪表板
  - CSV 导出备份
  - 存储整理建议
- **双语支持**：完整的中英文界面
- **数据持久化**：自动保存到浏览器本地存储

### 药品分类
- 止痛退烧药 / Pain & Fever
- 感冒药 / Cold & Flu
- 消化系统药 / Digestive
- 抗过敏药 / Allergy
- 皮肤外用药 / Skin & Topical
- 急救用品 / First Aid
- 处方药 / Prescription
- 维生素保健品 / Vitamins
- 眼耳用药 / Eye & Ear
- 儿童用药 / Children's

## 工作流程
```
┌─────────────────────┐
│   语音收集器         │
│   快速语音输入       │
│   导出 .txt 文件     │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│   AI 处理           │
│   （手动步骤）       │
│   结构化数据         │
└──────────┬──────────┘
           │
           ▼
┌─────────────────────┐
│   药品管理系统       │
│   导入并管理         │
│   追踪有效期         │
└─────────────────────┘
```

## 技术细节

### 系统要求
- 现代浏览器（推荐 Edge/Chrome）
- 麦克风访问权限（用于语音输入）
- 启用 JavaScript

### 数据存储
- 使用浏览器的 `localStorage` API
- 数据在会话间持久保存
- 可导出为 CSV/TXT 备份

### 语音识别
- 使用 Web Speech API
- 支持中文（zh-CN）
- 智能解析数量、日期和单位

## 麦克风权限说明

**对于本地文件（`file://` 协议）：**
由于安全限制，浏览器可能每次都会请求麦克风权限。

**解决方案：**
1. 使用语音收集器的**连续模式**（整个会话只需一次权限）
2. 使用本地服务器运行：
```bash
   python -m http.server 8000
   # 然后打开 http://localhost:8000/voice-collector.html
```
3. 通过 HTTP 协议访问时，权限会被记住

## 存储建议

建议将药品按类别整理到 6 个盒子中：
- **盒子1**：止痛退烧药、感冒药（常用药）
- **盒子2**：消化系统药、抗过敏药
- **盒子3**：皮肤外用药、急救用品
- **盒子4**：处方药（单独存放）
- **盒子5**：维生素保健品
- **盒子6**：眼耳用药、儿童用药

**重要提示：**
- 处方药应单独存放并远离儿童
- 外用药与内服药分开存储

## 文件说明

- `voice-collector.html` - 阶段一：快速语音收集
- `medicine-tracker.html` - 阶段二：完整库存管理

## 语言支持

两个应用程序均支持：
- 简体中文 / Chinese (Simplified)
- 英文 / English

界面元素、语音识别和数据导出均支持双语操作。

## 使用技巧

### 语音收集器
- **单次模式**：适合一个个慢慢说，每说完一句会自动添加并停止
- **连续模式**：适合快速连续录入，每说一句自动添加，继续说下一句，完成后点停止
- **示例**："红霉素眼膏有效期2027年6月"、"布洛芬30片"、"维生素C"
- **导出**：收集完成后导出文本文件，可用 AI 整理成结构化数据

### 药品管理系统
- 可以手动键盘输入或使用语音输入
- 同一种药品的不同批次可以分别录入（不同有效期、不同数量）
- 定期检查"即将过期"和"已过期"统计
- 定期导出 CSV 备份数据

## 常见问题

**Q: 为什么每次都要允许麦克风权限？**
A: 这是因为从本地文件（file://）打开时，浏览器的安全策略限制。解决方法：使用连续模式一次性录完，或者通过本地服务器访问。

**Q: 数据会丢失吗？**
A: 数据保存在浏览器的本地存储中，只要不清除浏览器数据就不会丢失。建议定期导出备份。

**Q: 可以在手机上使用吗？**
A: 可以，但语音识别效果可能因手机浏览器而异。推荐在电脑上使用以获得最佳体验。

**Q: 导出的数据如何处理？**
A: 语音收集器导出的文本可以用 AI（如 Claude）处理成结构化的 CSV 格式，然后手动录入到药品管理系统中。

## 许可证

个人家庭使用免费。

## 更新日志

### v1.0 (2025-11)
- 初始版本发布
- 语音收集器：单次/连续录音模式
- 药品管理系统：完整的 CRUD 功能和有效期追踪
- 双语界面支持
- 本地数据持久化
- CSV/TXT 导出功能